# Entity

永続化されるデータでドメインロジックが必要とされるリソースに対して生成する。可能な限り Entity 内の状態を外に出してはいけない（なるべく setter や getter を作らない）。

## 内部 ID と外部 ID

Entity には利用者が認知可能な外部 ID（UUID）とシステム内だけで利用する内部 ID（AutoIncrement な `UNSIGNED BIGINT`）が存在する。

Entity は必ず外部 ID を保有しているが、内部 ID は永続化されていない Entity には存在しない。

## 削除について

Entity には論理削除と物理削除のふたつが存在する。

### 論理削除

DB 上にはレコードが残っているが、利用者からは参照できない（＝削除されているように見える）状態のこと。論理削除が必要な Entity には Nullable な `deleted_at` が存在し、`deleted_at` に Unix 時間（ミリ秒）が設定されている間は論理削除状態であるとする。

### 物理削除

DB 上から該当するレコードを削除した状態のこと。原則として復元は不可能。Entity から物理削除に関する操作はできず、対応する Repository から行なう。
